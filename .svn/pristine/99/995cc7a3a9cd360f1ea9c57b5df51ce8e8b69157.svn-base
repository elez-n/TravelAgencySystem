package db;


import java.awt.Component;
import java.sql.Connection;
import java.sql.SQLException;

import javax.swing.JOptionPane;


/**
 * Klasa DbConnection predstavlja osnovnu (apstraktnu) klasu za upravljanje konekcijama ka bazama podataka.
 * 
 * Ova klasa sadrži osnovne metode za uspostavljanje i provjeru validnosti konekcije,
 * kao i za zatvaranje konekcije. Takođe, sadrži i podatke o parametrima potrebnim za konekciju,
 * kao što su adresa, port, ime baze, korisnicko ime i lozinka.
 */

public abstract class dbConnection {
	
	protected Connection conn = null;
	String address = null;
	String fullAddress = null;
	String dbName = null;
	String port = null;
	String driver = null;
	String url = null;
	String user = null;
	String password = null;
	
	public abstract Connection GetConnection(String address, String port, String dbName, String user, String password); {
		
	}
	
	public void closeConnection() {
		if(isConnectionOpen())
		{
			try {
				conn.close();
			} catch (SQLException e) {
				ErrorHandlerMethod(null, e.getMessage());
			}
			finally {
				conn = null;
			}
		}
	}
	
	public boolean isConnectionOpen() {
		return conn != null;
	}
	
	public boolean isConnectionValid(int timeout) {
		if(isConnectionOpen())
		{
			try {
				return conn.isValid(timeout);
			} catch (SQLException e) {
				ErrorHandlerMethod(null, e.getMessage());
			}
		}				
		return false;		
	}
	
	public Connection getConn() {
		return conn;
	}

	public String getAddress() {
		return address;
	}

	public String getFullAddress() {
		return fullAddress;
	}

	public String getDbName() {
		return dbName;
	}

	public String getPort() {
		return port;
	}

	public String getDriver() {
		return driver;
	}

	public String getUrl() {
		return url;
	}

	public String getUser() {
		return user;
	}

	public String getPassword() {
		return password;
	}

	protected void ErrorHandlerMethod(Component component, String errorMessage) {
		JOptionPane.showMessageDialog(component, errorMessage, "Error", 0);
	}

}